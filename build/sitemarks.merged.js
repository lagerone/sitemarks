window.sitemarks={},window.sitemarks.storage=function(){var a="sitemarks-lagr.se",b=function(){var b=JSON.parse(localStorage.getItem(a));return b||{items:[]}},c=function(b){localStorage.setItem(a,JSON.stringify(b))},d=function(a,b){if(!a.hasOwnProperty("items"))throw new Error("data is missing item property.");var c=!1;a.items.forEach(function(a){a.url===b.url&&(c=!0)}),c||a.items.push(b)},e=function(a,b){var c=[];a.items.forEach(function(a){a.url!==b.url&&c.push(a)}),a.items=c};return{ns:a,getFromStorage:b,addToStorage:c,addItemToData:d,removeItemFromData:e}}(window),window.sitemarks=window.sitemarks||{},window.sitemarks.oink=function(a,b){var c=function(a){this.element=this.setElement(a)};return c.prototype={setElement:function(a){if(a instanceof HTMLElement)return a;if("string"==typeof a){var b=a.trim().toLowerCase(),c=b.length-1;if(0===b.indexOf("<")&&b.indexOf(">")===c)return this.createElement(b.replace(/[^a-z]/g,""))}},createElement:function(a){return b.createElement(a)},css:function(a){for(var b in a)a.hasOwnProperty(b)&&(this.element.style[b]=a[b]);return this},attr:function(a){for(var b in a)a.hasOwnProperty(b)&&this.element.setAttribute(b,a[b]);return this},appendTo:function(a){return a instanceof HTMLElement&&a.appendChild(this.element),a instanceof c&&a.element.appendChild(this.element),this},append:function(a){return a instanceof HTMLElement&&this.element.appendChild(a),a instanceof c&&this.element.appendChild(a.element),this},text:function(a){return a&&a.length?(this.element.innerText=a,this.element.innerText||(this.element.textContent=a),this):this},click:function(a){return"function"==typeof a&&(this.element.onclick=a),this}},function(a){return new c(a)}}(window,document),function(a,b,c,d){"use strict";function e(a){if(!a.length)return d;var e,g,h,i=c("<ul>").css({margin:0,padding:0,listStyleType:"none"}).attr({id:k});return a.forEach(function(a){e=c("<li>").css({overflow:"hidden",lineHeight:"18px",margin:"0",padding:"3px 0",borderBottom:"1px solid rgba(255,255,255,0.3)",textAlign:"left"}),g=c("<a>").css({color:"#fff",borderRadius:"2px",fontSize:"10px",padding:"2px 3px",backgroundColor:"rgb(202, 60, 60)",textDecoration:"none"}).attr({href:a.url}).text("x").click(function(a){a.preventDefault();var c=b.getFromStorage();b.removeItemFromData(c,{url:a.target.href}),b.addToStorage(c),f()}),h=c("<a>").css({color:"#ccc",textDecoration:"none"}).attr({href:a.url}).text(" "+a.title),e.append(g),e.append(h),i.append(e)}),i}function f(){var a,c;i(k),a=b.getFromStorage(),c=e(a.items),c&&n.append(c)}function g(a){var c=b.getFromStorage();b.addItemToData(c,a),b.addToStorage(c)}function h(){var a=document.getElementsByTagName("title")[0];return a?a.text||"No title":"No title"}function i(a){var b=document.getElementById(a);b&&b.parentNode.removeChild(b)}var j,k="SiteMarks",l=k+"container",m="SiteMarks";if(j=document.getElementById(l))return j.style.display="none"===j.style.display?"block":"none",void 0;var n=c("<div>").attr({id:l}).css({position:"fixed",top:0,left:"10px",width:"180px",zIndex:"9999",backgroundColor:"rgba(0,0,0,0.7)",padding:"12px 12px 16px 12px",textAlign:"left",fontSize:"12px",fontFamily:"Verdana, Arial, sans-serif",color:"#ccc",borderBottomLeftRadius:"2px",borderBottomRightRadius:"2px",boxShadow:"0 0 10px rgba(0,0,0,0.7)",textShadow:"1px 1px 1px rgba(0,0,0,0.5)"}),o=c("<div>").css({fontWeight:"normal",color:"#ccc",fontSize:"16px"}).text(m),p=c("<a>").css({fontSize:"12px",color:"#ccc",textDecoration:"none"}).attr({href:"http://lagr.se"}).text(" from lagr.se"),q=c("<a>").css({"float":"right",cursor:"pointer"}).text("X").click(function(a){a.preventDefault(),n.css({display:"none"})}),r=c("<button>").css({backgroundColor:"#0078e7",borderRadius:"2px",width:"100%",display:"inline-block",zoom:1,whiteSpace:"nowrap",verticalAlign:"baseline",textAlign:"center",cursor:"pointer",fontFamily:"Verdana, Arial, sans-serif",fontSize:"14px",lineHeight:"28px",color:"#fff",border:0,margin:"12px 0",textShadow:"1px 1px 1px rgba(0,0,0,0.5)"}).text("Add this page").click(function(b){b.preventDefault();var c;c={url:a.location.href,title:h()},g(c),f()});o.append(p),o.append(q),n.append(o),n.append(r),console.dir(b);var s,t=b.getFromStorage();t.items.length&&(s=e(t.items),n.append(s));var u=document.getElementsByTagName("body")[0];u.appendChild(n.element)}(window,window.sitemarks.storage,window.sitemarks.oink);