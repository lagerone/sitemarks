window.sitemarks={},window.sitemarks.storage=function(){var a="sitemarks-lagr.se",b=function(){var b=JSON.parse(localStorage.getItem(a));return b||{items:[]}},c=function(b){localStorage.setItem(a,JSON.stringify(b))},d=function(a,b){if(!a.hasOwnProperty("items"))throw new Error("data is missing item property.");var c=!1;a.items.forEach(function(a){a.url===b.url&&(c=!0)}),c||a.items.push(b)},e=function(a,b){var c=[];a.items.forEach(function(a){a.url!==b.url&&c.push(a)}),a.items=c};return{ns:a,getFromStorage:b,addToStorage:c,addItemToData:d,removeItemFromData:e}}(window),window.sitemarks=window.sitemarks||{},window.sitemarks.oink=function(a,b){var c=function(a){this.element=this.setElement(a)};return c.prototype={setElement:function(a){if(a instanceof HTMLElement)return a;if("string"==typeof a){var b=a.trim().toLowerCase(),c=b.length-1;if(0===b.indexOf("<")&&b.indexOf(">")===c)return this.createElement(b.replace(/[^a-z]/g,""))}},createElement:function(a){return b.createElement(a)},css:function(a){for(var b in a)a.hasOwnProperty(b)&&(this.element.style[b]=a[b]);return this},attr:function(a){for(var b in a)a.hasOwnProperty(b)&&this.element.setAttribute(b,a[b]);return this},appendTo:function(a){return a instanceof HTMLElement&&a.appendChild(this.element),a instanceof c&&a.element.appendChild(this.element),this},append:function(a){return a instanceof HTMLElement&&this.element.appendChild(a),a instanceof c&&this.element.appendChild(a.element),this},text:function(a){return a&&a.length?(this.element.innerText=a,this.element.innerText||(this.element.textContent=a),this):this},click:function(a){return"function"==typeof a&&(this.element.onclick=a),this}},function(a){return new c(a)}}(window,document),function(a,b,c,d){"use strict";function e(a){if(!a.length)return d;var e,g,h,i=c("<ul>").attr({id:n});return a.sort(k),a.forEach(function(a){e=c("<li>"),g=c("<a>").attr({href:a.url,title:"Delete this item","class":"item-remove"}).text("x").click(function(a){a.preventDefault();var c=b.getFromStorage();b.removeItemFromData(c,{url:a.target.href}),b.addToStorage(c),f()});var d="Date added: ";d+=a.dateAdded?a.dateAdded:"unknown",h=c("<a>").attr({href:a.url,title:d,"class":"item-link"}).text(" "+a.title),e.append(g),e.append(h),i.append(e)}),i}function f(){var a,c;i(n),a=b.getFromStorage(),c=e(a.items),c&&q.append(c)}function g(a){var c=b.getFromStorage();b.addItemToData(c,a),b.addToStorage(c)}function h(){var a=document.getElementsByTagName("title")[0];return a?a.text.trim()||"No title":"No title"}function i(a){var b=document.getElementById(a);b&&b.parentNode.removeChild(b)}function j(){var a=new Date,b=a.getMonth()+1+"",c=a.getDate()+"";return 1===b.length&&(b="0"+b),1===c.length&&(c="0"+c),[a.getFullYear(),b,c].join("-")}function k(a,b){return a.title>b.title?1:a.title<b.title?-1:0}var l,m="SiteMarks",n=m.toLowerCase(),o=n+"-container",p="SiteMarks";if(l=document.getElementById(o))return void(l.style.display="none"===l.style.display?"block":"none");var q=c("<div>").attr({id:o}),r=c("<div>").attr({"class":"sitemarks-title"}).text(p),s=c("<a>").attr({href:"http://lagr.se"}).text(" from lagr.se"),t=c("<a>").attr({"class":"title-close-button"}).text("X").click(function(a){a.preventDefault(),q.css({display:"none"})}),u=c("<button>").attr({"class":"add-this-page"}).text("Add this page").click(function(b){b.preventDefault();var c;c={url:a.location.href,title:h(),dateAdded:j()},g(c),f()});r.append(s),r.append(t),q.append(r),q.append(u);var v,w=b.getFromStorage();w.items.length&&(v=e(w.items),q.append(v));var x=document.getElementsByTagName("body")[0];x.appendChild(q.element)}(window,window.sitemarks.storage,window.sitemarks.oink);