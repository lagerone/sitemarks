window.sitemarks={},window.sitemarks.storage=function(){var a="sitemarks-lagr.se",b=function(){var b=JSON.parse(localStorage.getItem(a));return b||{items:[]}},c=function(b){localStorage.setItem(a,JSON.stringify(b))},d=function(a,b){if(!a.hasOwnProperty("items"))throw new Error("data is missing item property.");var c=!1;a.items.forEach(function(a){a.url===b.url&&(c=!0)}),c||a.items.push(b)},e=function(a,b){var c=[];a.items.forEach(function(a){a.url!==b.url&&c.push(a)}),a.items=c};return{ns:a,getFromStorage:b,addToStorage:c,addItemToData:d,removeItemFromData:e}}(window),window.sitemarks=window.sitemarks||{},window.sitemarks.oink=function(a,b){var c=function(a){this.element=this.setElement(a)};return c.prototype={setElement:function(a){if(a instanceof HTMLElement)return a;if("string"==typeof a){var b=a.trim().toLowerCase(),c=b.length-1;if(0===b.indexOf("<")&&b.indexOf(">")===c)return this.createElement(b.replace(/[^a-z]/g,""))}},createElement:function(a){return b.createElement(a)},css:function(a){for(var b in a)a.hasOwnProperty(b)&&(this.element.style[b]=a[b]);return this},attr:function(a){for(var b in a)a.hasOwnProperty(b)&&this.element.setAttribute(b,a[b]);return this},appendTo:function(a){return a instanceof HTMLElement&&a.appendChild(this.element),a instanceof c&&a.element.appendChild(this.element),this},append:function(a){return a instanceof HTMLElement&&this.element.appendChild(a),a instanceof c&&this.element.appendChild(a.element),this},text:function(a){return a&&a.length?(this.element.innerText=a,this.element.innerText||(this.element.textContent=a),this):this},click:function(a){return"function"==typeof a&&(this.element.onclick=a),this}},function(a){return new c(a)}}(window,document),function(a,b,c,d){"use strict";function e(a){if(!a.length)return d;var e,g,h,i=c("<ul>").css({maxHeight:"350px",overflow:"auto",margin:0,padding:0,listStyleType:"none"}).attr({id:m});return a.sort(k),a.forEach(function(a){e=c("<li>").css({overflow:"hidden",lineHeight:"18px",margin:"0",padding:"3px 0",borderBottom:"1px solid rgba(255,255,255,0.3)",textAlign:"left"}),g=c("<a>").css({color:"#fff",borderRadius:"2px",fontSize:"10px",padding:"2px 3px",backgroundColor:"rgb(202, 60, 60)",textDecoration:"none"}).attr({href:a.url,title:"Delete this item"}).text("x").click(function(a){a.preventDefault();var c=b.getFromStorage();b.removeItemFromData(c,{url:a.target.href}),b.addToStorage(c),f()});var d="Added: ";d+=a.dateAdded?a.dateAdded:"unknown",h=c("<a>").css({color:"#ccc",textDecoration:"none"}).attr({href:a.url,title:d}).text(" "+a.title),e.append(g),e.append(h),i.append(e)}),i}function f(){var a,c;i(m),a=b.getFromStorage(),c=e(a.items),c&&p.append(c)}function g(a){var c=b.getFromStorage();b.addItemToData(c,a),b.addToStorage(c)}function h(){var a=document.getElementsByTagName("title")[0];return a?a.text.trim()||"No title":"No title"}function i(a){var b=document.getElementById(a);b&&b.parentNode.removeChild(b)}function j(){var a=new Date,b=a.getMonth()+1+"";return 1===b.length&&(b="0"+b),[a.getFullYear(),b,a.getDate()].join("-")}function k(a,b){return a.title>b.title?1:a.title<b.title?-1:0}var l,m="SiteMarks",n=m+"container",o="SiteMarks";if(l=document.getElementById(n))return void(l.style.display="none"===l.style.display?"block":"none");var p=c("<div>").attr({id:n}).css({position:"fixed",top:0,left:"10px",width:"200px",zIndex:"9999",backgroundColor:"rgba(0,0,0,0.7)",padding:"12px 8px 16px 8px",textAlign:"left",fontSize:"12px",fontFamily:"Verdana, Arial, sans-serif",color:"#ccc",borderBottomLeftRadius:"2px",borderBottomRightRadius:"2px",boxShadow:"0 0 10px rgba(0,0,0,0.7)",textShadow:"1px 1px 1px rgba(0,0,0,0.5)"}),q=c("<div>").css({fontWeight:"normal",color:"#ccc",fontSize:"16px"}).text(o),r=c("<a>").css({fontSize:"12px",color:"#ccc",textDecoration:"none"}).attr({href:"http://lagr.se"}).text(" from lagr.se"),s=c("<a>").css({"float":"right",cursor:"pointer"}).text("X").click(function(a){a.preventDefault(),p.css({display:"none"})}),t=c("<button>").css({backgroundColor:"#0078e7",borderRadius:"2px",width:"100%",display:"inline-block",zoom:1,whiteSpace:"nowrap",verticalAlign:"baseline",textAlign:"center",cursor:"pointer",fontFamily:"Verdana, Arial, sans-serif",fontSize:"14px",lineHeight:"28px",color:"#fff",border:0,margin:"12px 0",textShadow:"1px 1px 1px rgba(0,0,0,0.5)"}).text("Add this page").click(function(b){b.preventDefault();var c;c={url:a.location.href,title:h(),dateAdded:j()},g(c),f()});q.append(r),q.append(s),p.append(q),p.append(t);var u,v=b.getFromStorage();v.items.length&&(u=e(v.items),p.append(u));var w=document.getElementsByTagName("body")[0];w.appendChild(p.element)}(window,window.sitemarks.storage,window.sitemarks.oink);